@* @using Microsoft.AspNetCore.Authentication.Cookies;
@using Microsoft.AspNetCore.Authentication.OpenIdConnect; *@
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Authentication
@* @inject LogOutService LogOutService *@
@inject NavigationManager Nav

<AuthorizeView>
    <Authorized>
        <h3>@context.User.Identity?.Name</h3>
        @* <div class="dropdown-menu">
            <span class="dropdown-button"><img role="presentation" src="icons/user.svg" /></span>
            <div class="dropdown-content">
                <a class="dropdown-item" href="user/orders">My orders</a>
                <form class="dropdown-item" method="post" action="user/logout" @formname="logout" @onsubmit="LogOutAsync">
                    <AntiforgeryToken />
                    <button type="submit">Log out</button>
                </form>
            </div>
        </div> *@
    </Authorized>
    <NotAuthorized>
        <a  class="inline-block no-underline hover:text-black" 
            href="@Features.User.Pages.Login.Url(Nav)"
            aria-label="Sign in"
        >
            <svg role="presentation" class="fill-current hover:text-black" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <circle fill="none" cx="12" cy="7" r="3"></circle>
                <path d="M12 2C9.243 2 7 4.243 7 7s2.243 5 5 5 5-2.243 5-5S14.757 2 12 2zM12 10c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3S13.654 10 12 10zM21 21v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h2v-1c0-2.757 2.243-5 5-5h4c2.757 0 5 2.243 5 5v1H21z"></path>
            </svg>
        </a>

    </NotAuthorized>
</AuthorizeView>

@code {
    [CascadingParameter]
    public HttpContext? HttpContext { get; set; }

    private Task LogOutAsync()
        => Task.CompletedTask; //LogOutService.LogOutAsync(HttpContext!);
}